<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=theme-color content="dark"><title>Getting started with OPA and conftest | Aiman Ismail</title><meta property="og:site_name" content="Aiman Ismail"><meta property="og:title" content="Getting started with OPA and conftest | Aiman Ismail"><meta itemprop=name content="Getting started with OPA and conftest | Aiman Ismail"><meta name=twitter:title content="Getting started with OPA and conftest | Aiman Ismail"><meta name=application-name content="Getting started with OPA and conftest | Aiman Ismail"><meta name=twitter:card content="summary"><meta name=description content="I'm learning stuff."><meta name=twitter:description content="I'm learning stuff."><meta itemprop=description content="I'm learning stuff."><meta property="og:description" content="I'm learning stuff."><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=stylesheet href=/sass/main.min.ab99ff095f832511e24ffb2fba2b51ad473b2f7e9301d674eba2c6c3a6e8bd81.css></head><script>(function(){const e="ThemeColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="ThemeColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.userColorScheme="dark":document.documentElement.dataset.userColorScheme="light"})()</script><body class=dark><nav class=navbar><div class=container><div class=flex><div><a class=brand href=/>Aiman Ismail</a></div><div class=flex><a href=/articles/>Articles</a>
<button id=dark-mode-button><svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163.0 101.643 1.641 1.163 1.163.0 00-1.643-1.641zm-16.022 14.38a1.74 1.74.0 000 2.465 1.742 1.742.0 100-2.465zm13.968-2.147a2.904 2.904.0 01-4.108.0 2.902 2.902.0 010-4.107 2.902 2.902.0 014.108.0 2.902 2.902.0 010 4.107z" fill="#ffcc4d"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg><svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M16 2s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2V2zm18 14s2 0 2 2-2 2-2 2h-2s-2 0-2-2 2-2 2-2h2zM4 16s2 0 2 2-2 2-2 2H2s-2 0-2-2 2-2 2-2h2zm5.121-8.707s1.414 1.414.0 2.828-2.828.0-2.828.0L4.878 8.708s-1.414-1.414.0-2.829c1.415-1.414 2.829.0 2.829.0l1.414 1.414zm21 21s1.414 1.414.0 2.828-2.828.0-2.828.0l-1.414-1.414s-1.414-1.414.0-2.828 2.828.0 2.828.0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zM16 32s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2v-2z"/><circle fill="#ffd983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg></button></div></div></div></nav><main><div class=container><article><header class=article-header><div class=thumb><div><h1>Getting started with OPA and conftest</h1><div class=post-meta><div>By Aiman Ismail | <time>November 12, 2022</time>
| 7 minutes</div><div class=tags><a href=/tags/opa/>opa</a>
<a href=/tags/conftest/>conftest</a>
<a href=/tags/policy/>policy</a>
<a href=/tags/terraform/>terraform</a>
<a href=/tags/rego/>rego</a></div></div></div></div></header></article><div class=article-post><p>I started using OPA at my <code>$dayJob</code> recently and there are some parts that I think is not intuitive to grok for beginners.</p><p>If you want to play around with the rules and input, you can use the <a href=https://play.openpolicyagent.org/>Rego Playground</a>. It&rsquo;s super useful and I used it to test out policies and test my hypothesis when playing around with Rego language.</p><h2 id=how-does-opa-rego-and-conftest-related-to-each-other><a href=#how-does-opa-rego-and-conftest-related-to-each-other class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>How does OPA, Rego, and conftest related to each other?</h2><p>Rego is a declarative language used to write OPA policies. Then, OPA is the engine that takes in the policies written in Rego and evaluates it, producing a set of documents called &ldquo;rules&rdquo;. You can use OPA and the Rego language directly to write policies for your config files but using conftest will make the DX much better. conftest builds on top of OPA and provide some extra functionality that makes using OPA easier.</p><h2 id=rego-basics><a href=#rego-basics class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Rego Basics</h2><p>The Rego language focuses on querying the input to look for a given condition. If the input satisfies the query, then it will produce the document.</p><h3 id=variable-assignments><a href=#variable-assignments class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Variable Assignments</h3><p>Variable assignment in Rego works the same like in other language. The expression <code>foo := "hello"</code> will assign the value <code>"hello"</code> to the variable <code>foo</code>.</p><p>One difference in Rego is that it implicitly assigns value <code>true</code> to the document if the condition given evaluates to <code>true</code>. In the example below, there&rsquo;s two ways to write the Rego expression. Rego actually implicitly assigns the value <code>true</code> so we can also remove</p><pre tabindex=0><code class=language-opa data-lang=opa>foo := &#34;hello&#34;

# first way: explicitly assigns `true` to `result` when condition is satisfied
result := true if foo == &#34;hello&#34;

# Rego implicitly assigns `true` to `result` when condition is satisfied
result if foo == &#34;hello&#34;
</code></pre><p>Let&rsquo;s bring this up to next level. Most of the time, the condition you&rsquo;re checking is not as straight forward as checking the value against a static value. You might also need to evaluate expressions in between and save the intermediary values in a variable to help improve readability. In previous example we only used a one-liner for the rule body but you can also have more complex rule body like the following using curly braces.</p><h3 id=declarative-rego-language><a href=#declarative-rego-language class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Declarative Rego Language</h3><p>The Rego language is declarative and useful to query data structures for any value. Consider the following example (<a href=https://play.openpolicyagent.org/p/gZcwi6zzAA>Rego playground link</a>):</p><p>Let&rsquo;s assume our input is an array of object, each containing the keys &ldquo;id&rdquo; and &ldquo;name&rdquo;. In this policy we&rsquo;re checking that the objects doesn&rsquo;t have any forbiden value for &ldquo;name&rdquo;.</p><pre tabindex=0><code class=language-opa data-lang=opa>forbidden_names := [&#34;foobar&#34;, &#34;john&#34;]

user_forbidden if input.users[i].name == forbidden_names[j]
</code></pre><p>This code would look something like this in Python:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>users</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;foo&#34;</span><span class=p>},</span> <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>}]</span>
</span></span><span class=line><span class=cl><span class=n>forbidden_names</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;foobar&#34;</span><span class=p>,</span> <span class=s2>&#34;john&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>user_forbidden</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nb>input</span><span class=o>.</span><span class=n>users</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>forbidden_names</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=n>user_forbidden</span><span class=o>.</span><span class=n>push</span><span class=p>(</span><span class=nb>input</span><span class=o>.</span><span class=n>users</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=n>forbidden_names</span><span class=p>[</span><span class=n>j</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=nb>any</span><span class=p>(</span><span class=n>user_forbidden</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>For both codes, <code>user_forbidden</code> will evaluate to <code>true</code> if one of the user name is included in the <code>forbidden_names</code> list. In the Python code, we used <code>for</code> loops with the <code>any()</code> function to check that none of the value is true. In the Rego code, we don&rsquo;t have to use any for loop or iterate through the user list. <code>forbidden_names[i]</code> means &ldquo;for any of the values in <code>forbidden_names</code>. So in our Rego code, we essentially tells OPA, if any of the value in <code>input.users</code> is the same as any of the value in <code>forbidden_name</code>, then return set the value of <code>user_forbidden</code> to <code>true</code>.</p><p>In this case, since we are not using the index <code>i</code> and <code>j</code> to reference the value at those index anywhere in the policy, we can simplify it more by using <code>_</code> (underscore) instead for the index. <code>_</code> is like a throwaway value and we don&rsquo;t care about the index, we just care if one of the values is the same in <code>user.input</code> and <code>forbidden_names</code>.</p><pre tabindex=0><code class=language-opa data-lang=opa>user_forbidden if input.users[_].name == forbidden_names[_]
</code></pre><h3 id=more-complex-policies><a href=#more-complex-policies class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>More complex policies</h3><p>Before this our policies are all simple one liner but Rego also supports writing the rule body in multiple lines. In the example below, we are adding an exception to the rule that the previous rule doesn&rsquo;t apply to user with <code>id == 5</code>. So if one our user <code>name</code> value is <code>john</code> but have <code>id == 5</code> then <code>user_forbidden</code> won&rsquo;t evaluate to <code>true</code>. Note that we are using the same index <code>i</code> when accessing the <code>name</code> and <code>id</code> property. This means we are referring to the same user. If we use <code>_</code> or a different index when accessing the <code>name</code> and <code>id</code>, the rule will evaluate to <code>true</code>.</p><p>If any of the expressions inside the rule body evaluates to <code>false</code> or <code>undefined</code> then it will stop evaluating the rule body and return <code>undefined</code> for <code>user_forbidden</code>.</p><pre tabindex=0><code class=language-opa data-lang=opa>forbidden_names := [&#34;foobar&#34;, &#34;john&#34;]

user_forbidden if {
    input.users[i].name == forbidden_names[_]
    input.users[i].id != 5

    false
    print(&#34;this will not be printed&#34;)
}
</code></pre><h2 id=using-conftest><a href=#using-conftest class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Using conftest</h2><p>Previously, we used arbitrary names for our rules but conftest introduces a few keywords that we must use so that it can detect any failed rules and includes it in the output. Conftest will pick up any rules with name <code>deny</code>, <code>warn</code>, or <code>violation</code> and the summary will be shown in conftest output.</p><pre tabindex=0><code>➜ tree conftest
conftest
├── input.json
└── policy
    └── names.rego
</code></pre><pre tabindex=0><code># input.json
{
    &#34;users&#34;: [
        {
            &#34;id&#34;: 1,
            &#34;name&#34;: &#34;john&#34;
        },
        {
            &#34;id&#34;: 2,
            &#34;name&#34;: &#34;bar&#34;
        },
        {
            &#34;id&#34;: 3,
            &#34;name&#34;: &#34;foobar&#34;
        }
    ]
}
</code></pre><pre tabindex=0><code class=language-opa data-lang=opa># policy/names.rego
package main

import future.keywords.contains
import future.keywords.if

deny contains msg if {
    forbidden_names := [&#34;john&#34;]
    name := input.users[_].name
    name == forbidden_names[_]
    
    msg := sprintf(&#34;username %v is not allowed&#34;, [name])
}

warn contains msg if {    
    id := input.users[_].id
    id == 2
    
    msg := sprintf(&#34;id %v is not allowed&#34;, [id])
}
</code></pre><p>Run conftest against our input file:</p><pre tabindex=0><code>➜ conftest test input.json --policy policy/ 
WARN - input.json - main - id 2 is not allowed
FAIL - input.json - main - username john is not allowed

2 tests, 0 passed, 0 warnings, 2 failures, 0 exceptions
</code></pre><p>Note the values output here, the <code>deny</code> rule will be output as <code>FAIL</code> if the rule passes while the <code>warn</code> rule is counted as <code>WARN</code>. Here, conftest takes the output values from the OPA engine and formats the output for us to make it easier to interpret or integrate with other tools. You can also change the output format of conftest by passing in the <code>--output</code> flag. I like the <code>github</code> output since it will automatically prints the output in a format that Github Actions understoods and will surface error in Github UI approriately. You can also output it as JSON, which is great if you want to process the result output using tools like <code>jq</code>.</p><pre tabindex=0><code>➜ conftest test --help
[...]
  -o, --output string         Output format for conftest results - valid options are: [stdout json tap table junit github] (default &#34;stdout&#34;)
</code></pre><p>JSON output:</p><pre tabindex=0><code>➜ conftest test input.json --output json
[
  {
    &#34;filename&#34;: &#34;input.json&#34;,
    &#34;namespace&#34;: &#34;main&#34;,
    &#34;successes&#34;: 0,
    &#34;warnings&#34;: [
      {
        &#34;msg&#34;: &#34;id 2 is not allowed&#34;
      }
    ],
    &#34;failures&#34;: [
      {
        &#34;msg&#34;: &#34;username john is not allowed&#34;
      }
    ]
  }
]
</code></pre><h3 id=parsers-using-other-format-as-input-files><a href=#parsers-using-other-format-as-input-files class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>parsers: using other format as input files</h3><p>Until now all our input has been in JSON format but conftest also has built-in parsers that can automatically detect the input format and converts it to JSON for us. As of this moment, here is the list of valid parsers: [cue dockerfile edn hcl1 hcl2 hocon ignore ini json jsonnet properties spdx toml vcl xml yaml dotenv].</p><p>Example is for HCL2 code used for Terraform:</p><pre tabindex=0><code class=language-hcl2 data-lang=hcl2># input.tf
resource &#34;aws_imaginary_resource&#34; &#34;this&#34; {
  name = &#34;this&#34;
  instance_type = &#34;r5.4xlarge&#34;
  security_groups = [&#34;12345&#34;, &#34;45678&#34;]
}

resource &#34;aws_imaginary_resource&#34; &#34;that&#34; {
  name = &#34;that&#34;
  instance_type = &#34;t3.medium&#34;
  
  ingress {
    port = 1234
    cidr = [&#34;0.0.0.0/0&#34;]
  }
}
</code></pre><p>We can use <code>conftest parse</code> to see how conftest will parse the Terraform file and then write our policy based on the parsed input.</p><pre tabindex=0><code>➜ conftest parse input.tf
{
  &#34;resource&#34;: {
    &#34;aws_imaginary_resource&#34;: {
      &#34;that&#34;: {
        &#34;ingress&#34;: {
          &#34;cidr&#34;: [
            &#34;0.0.0.0/0&#34;
          ],
          &#34;port&#34;: 1234
        },
        &#34;instance_type&#34;: &#34;t3.medium&#34;,
        &#34;name&#34;: &#34;that&#34;
      },
      &#34;this&#34;: {
        &#34;instance_type&#34;: &#34;r5.4xlarge&#34;,
        &#34;name&#34;: &#34;this&#34;,
        &#34;security_groups&#34;: [
          &#34;12345&#34;,
          &#34;45678&#34;
        ]
      }
    }
  }
}
</code></pre><h2 id=conclusion><a href=#conclusion class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Conclusion</h2><p>I just got started with OPA but considering the flexibility of it when used with conftest, I feel like you can use this for a lot of use cases. The ability to separate the policy logic from your application is powerful and the declarative nature of the Rego language also helps simplify the policy a lot as demonstrated in my comparison of the Python code above.</p></div></div><div class=container><nav class="flex container suggested"><a rel=prev href=/articles/otel-slack-integration/ title="Previous post (older)"><span>Previous</span>
Instrumenting a Slack bot with OpenTelemetry</a>
<a rel=next href=/articles/conftest-pull-from-s3/ title="Next post (newer)"><span>Next</span>
Atlantis: run policy check using policies from S3</a></nav></div><div class=container></div></main></main><footer class="footer flex"><section class=container><nav class=footer-links><a href=/index.xml>RSS</a></nav></section><script defer src=/ts/features.dd8e5b18a6dda91367e396fd8dc9b9f83a1993065f709a53e056e0f2e9096ea1.js data-enable-footnotes=true></script></footer></body></html>